!function(a){a.widget("dui.figure",{options:{max:100,min:0,height:102,width:242,lowColor:"green",highColor:"red",threshold:50,interval:170,equal:0},_create:function(){this.element.addClass("figure-wrap").css({height:this.options.height,width:this.options.width}),this.element.append('<div class="figure-canvas"></div><div class="figure-threshold"></div>'),this.options.data=[],this.threshold(this.options.threshold)},start:function(){var b=this;this.stop();var c=this.options.width-1,d=this.element.find(".figure-canvas").css("left",c);this.options.timer=setInterval(function(){var e=b.options.data.pop()||b.options.min;b.options.data.length=0;var f=(e-b.options.min)/(b.options.max-b.options.min)*d.height();d.children().length>d.width()-2&&d.children(":first").remove(),a("<div></div>").height(f).width(1).css({background:e>=b.options.threshold+b.options.equal?b.options.highColor:b.options.lowColor,left:c-d.position().left,position:"absolute",bottom:0}).appendTo(d),d.css("left",function(a,b){return parseFloat(b)-1})},this.options.interval)},stop:function(){clearInterval(this.options.timer),this.element.find(".figure-canvas").empty(),this.options.data.length=0},threshold:function(a){if("number"!=typeof a)return this.options.threshold;a>this.options.max?a=this.options.max:a<this.options.min&&(a=this.options.min),this.options.threshold=a;var b=(this.options.threshold-this.options.min)/(this.options.max-this.options.min);this.element.find(".figure-threshold").css("bottom",b*(this.element.height()-1))},push:function(a){a>this.options.max?a=this.options.max:a<this.options.min&&(a=this.options.min),this.options.data.push(a)}})}(jQuery);